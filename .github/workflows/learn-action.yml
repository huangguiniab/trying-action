name: 构建ARM64基本系统
on: [push]
jobs:
  Default-action:
    runs-on: ubuntu-release
    steps:
      - name: 安装必要依赖，准备环境
        run: |
             sudo apt update
             sudo apt install debian-archive-keyring qemu qemu-user-static binfmt-support debootstrap xz-utils -y
      - name: 开始构建基本系统:ARM64
        run: sudo debootstrap --arch arm64 buster arm64/
      - name: 打包文件
        run: |
             cd arm64/
             sudo tar -cvJf ../rootfs.tar.xz .
             cd ..
             sudo chmod 777 rootfs.tar.xz
      - name: 发布Release
        uses: JasonEtco/upload-to-release@master
        with:
          args: rootfs.tar.xz
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
